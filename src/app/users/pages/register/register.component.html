<section class="container-register">
  <ng-lottie
    [height]="'200px'"
    [options]="{path: '/animations/create_user.json'}"
  />
  <h6 class="title-create">Seu caminho para metas claras e finanças em ordem</h6>


  <form class="mt-1" [formGroup]="userForm">
    <mat-form-field class="w-100">
      <mat-label>Email</mat-label>
      <input type="email" matInput formControlName="email" placeholder="Ex. pat@example.com">
      @if (userForm.get('email')?.hasError('email') && !userForm.get('email')?.hasError('required')) {
        <mat-error>Informe um email Válido</mat-error>
      }
      @if (userForm.get('email')?.hasError('required')) {
        <mat-error>Email é <strong>obrigatório</strong></mat-error>
      }
    </mat-form-field>

    <mat-form-field class="w-100">
      <mat-label>Nome</mat-label>
      <input type="text" matInput formControlName="name" placeholder="Ex. Joao">

      @if (userForm.get('name')?.hasError('required')) {
        <mat-error>Nome é <strong>obrigatório</strong></mat-error>
      }
    </mat-form-field>

    <mat-form-field class="w-100">
      <mat-label>Senha</mat-label>
      <input [type]="showPassword ? 'text' : 'password'" matInput formControlName="password" >
      <mat-icon (click)="showPassword = !showPassword" matSuffix>{{showPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
      @if (userForm.get('password')?.hasError('required')) {
        <mat-error>Senha é <strong>obrigatório</strong></mat-error>
      }
    </mat-form-field>

    <mat-form-field class="w-100">
      <mat-label>Confirmar Senha</mat-label>
      <input [type]="showPassword ? 'text' : 'password'" matInput formControlName="confirmPassword">
      <mat-icon (click)="showPassword = !showPassword" matSuffix>{{showPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
      @if (userForm.get('confirmPassword')?.hasError('required')) {
        <mat-error>Senha é <strong>obrigatório</strong></mat-error>
      }
      @if (userForm.get('confirmPassword')?.hasError('passwordsDoNotMatch')) {
        <mat-error>As senhas devem ser iguais</mat-error>
      }
    </mat-form-field>

    <button [disabled]="userForm.invalid" (click)="registerUser()" class="w-100 mt-1" mat-flat-button>Criar Conta</button>

    <div class="container-action-login">
      <span>Já possui conta?</span>
      <a [routerLink]="['/users/login']" routerLinkActive="router-link-active"  class="link-create-account">Entrar</a>
    </div>
  </form>
</section>
